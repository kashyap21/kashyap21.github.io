if (self.CavalryLogger) { CavalryLogger.start_js(["OiPlF"]); }

__d("ReactComposerTagEventTaggerContainer.react",["React","ReactComposerLoggingName","ReactComposerMinutiaeAttachmentActions","ReactComposerTagEventTaggerComponent.react","ReactComposerTaggerActions","ReactComposerTaggerContainerStateMixin","ReactComposerTaggerHideOnEscapeKeyPress.react","ReactComposerTaggerType","TagEventSproutConsts","TagEventSproutEventPickerRelaySearchSource","WebAsyncSearchSource","XEventsTagEventTypeaheadController","areEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"ReactComposerTagEventTaggerContainer",mixins:[b("ReactComposerTaggerContainerStateMixin")()],statics:{taggerID:b("ReactComposerTaggerType").TAG_EVENT,loggingName:b("ReactComposerLoggingName").TAG_EVENT,taggerComponent:b("ReactComposerTagEventTaggerComponent.react")},propTypes:{mediaLocation:a.shape({latitude:a.number.isRequired,longitude:a.number.isRequired}),mediaTakenTime:a.number,isPersonalTimeline:a.bool},_nearByEventsSearchSource:null,_userInputEventsSearchSource:b("TagEventSproutEventPickerRelaySearchSource"),UNSAFE_componentWillMount:function(){this._initNearByEventsSearchSource(this.props),this._initUserInputEventsSearchSource()},UNSAFE_componentWillReceiveProps:function(a){(!b("areEqual")(a.mediaLocation,this.props.mediaLocation)||!b("areEqual")(a.mediaTakenTime,this.props.mediaTakenTime))&&this._initNearByEventsSearchSource(a)},render:function(){return!this.state.isSelected?null:b("React").createElement("div",{"data-testid":"tag-event-tagger-component"},b("React").createElement(b("ReactComposerTaggerHideOnEscapeKeyPress.react"),{shouldHideOnEscape:this.state.isSelected},b("React").createElement(b("ReactComposerTagEventTaggerComponent.react"),{autoFocus:this.state.focusedOnInit,nearByEventsSearchSource:this._nearByEventsSearchSource,onSelect:this._onSelect,taggerData:this.state.taggerData,userInputEventsSearchSource:this._userInputEventsSearchSource})))},_initNearByEventsSearchSource:function(a){a=b("XEventsTagEventTypeaheadController").getURIBuilder().setFloat("media_latitude",(a.mediaLocation||{}).latitude).setFloat("media_longitude",(a.mediaLocation||{}).longitude).setInt("media_taken_time",a.mediaTakenTime?a.mediaTakenTime:null).setFBID("target_id",this.context.targetID).getURI();this._nearByEventsSearchSource=new(b("WebAsyncSearchSource"))({bootstrapRequests:[{uri:a}],getAllForEmptyQuery:!0,queryRequests:[{uri:a}]})},_initUserInputEventsSearchSource:function(){this._userInputEventsSearchSource=new(b("TagEventSproutEventPickerRelaySearchSource"))()},_onSelect:function(a){var c=this._getCopyOfData();a&&a.mediaTakenTime&&(c.mediaTakenTime=a.mediaTakenTime);a&&a.event?(c.eventID=a.event.getUniqueID(),c.event=a.event,b("ReactComposerTaggerActions").deselectCurrentTagger(this.context.composerID,b("ReactComposerLoggingName").TAG_EVENT),b("ReactComposerMinutiaeAttachmentActions").fetchMinutiaeAttachment(this.context.composerID,b("TagEventSproutConsts").composer_action_id,c.eventID,this.context.targetID,this.context.actorID,!!this.props.isPersonalTimeline)):(c.eventID=null,c.event=null,b("ReactComposerMinutiaeAttachmentActions").setMarkup(this.context.composerID,null));b("ReactComposerTaggerActions").setTaggerData(this.context.composerID,b("ReactComposerLoggingName").TAG_EVENT,b("ReactComposerTaggerType").TAG_EVENT,c)},_getCopyOfData:function(){return Object.assign({},this.state.taggerdata)}});e.exports=c}),null);