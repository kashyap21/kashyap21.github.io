if (self.CavalryLogger) { CavalryLogger.start_js(["+u4og"]); }

__d("MessagesJewelThreadList.react",["cx","fbt","Arbiter","BootloadedComponent.react","ChatConfig","CurrentUser","EventProfiler","ImmutableObject","JSResource","Link.react","MessagesJewelThreadlistRowContainer.react","MessagingTag","MessengerMessageRequestsInfo.react","MessengerState.bs","React","ScrollableArea.react","SubscriptionsHandler","TimeSlice","XUISpinner.react","debounce","getViewportDimensions","requestIdleCallback","requireWeak","throttle"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=160,k=60,l=10;c=b("React").PropTypes;d=babelHelpers.inherits(a,b("React").Component);i=d&&d.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.$1=new(b("SubscriptionsHandler"))(),this.$4=function(){if(this.props.isLoaded||!this.refs.scrollable)return;var a=this.refs.scrollable.getArea();if(!a)return;a.getScrollTop()+a.getClientHeight()>=a.getScrollHeight()-1&&(this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest())}.bind(this),this.$9=function(a){a.preventDefault(),this.props.onLoadMoreRequest&&this.props.onLoadMoreRequest()}.bind(this),this.$8=function(a){this.props.onFilteredRequestsClick&&this.props.onFilteredRequestsClick(a)}.bind(this),this.state={height:this.$3(),hasQP:!1},c}a.prototype.componentDidMount=function(){__p&&__p();this.$2=Event.listen(window,"resize",b("debounce")(function(){this.setState({height:this.$3()})}.bind(this)));b("EventProfiler").informManualInteractionTimestamp(["Messages_Jewel_Button"],!0,"click");var a=b("ChatConfig").get("message_jewel_promotion_data");a&&this.setState({hasQP:!0},function(){this.setState({height:this.$3()})}.bind(this));this.$1.addSubscriptions(b("Arbiter").subscribeOnce("hideMessageJewelQP",function(){this.setState({hasQP:!1},function(){this.setState({height:this.$3()})}.bind(this))}.bind(this)));a=function(){b("requestIdleCallback")(function(){b("requireWeak")("FantaTabsEagerBootloader",function(a){return a.bootload()})})};b("TimeSlice").guard(a,"JewelOpen fanta eagerbootloader",{propagationType:b("TimeSlice").PropagationType.ORPHAN})()};a.prototype.componentDidUpdate=function(a){a.threads.length===0&&this.props.threads.length!==0&&(this.props.onRenderThreads&&this.props.onRenderThreads()),b("EventProfiler").informManualInteractionTimestamp(["Messages_Jewel_Button"],!0,"click")};a.prototype.componentWillUnmount=function(){this.$2.remove(),this.$1.release()};a.prototype.render=function(){return b("React").createElement(b("MessengerState.bs").jsComponent,{fbid:b("CurrentUser").getID()},function(a){return b("React").createElement(b("ScrollableArea.react"),{className:"_2q3u",height:this.state.height,onScroll:b("throttle")(this.$4,50),ref:"scrollable"},b("React").createElement("ul",{className:"jewelContent"},this.$5(),this.props.threads.map(function(c){return this.$6(c,b("MessengerState.bs").pendingFolderUnseenCount(a),b("MessengerState.bs").readReceiptsPerThread(a))}.bind(this))),this.$7())}.bind(this))};a.prototype.$6=function(a,c,d){return b("React").createElement(b("MessagesJewelThreadlistRowContainer.react"),{folder:this.props.folder,key:a.thread_id,thread:a,viewer:this.props.viewer,handleChatTabOpen:this.props.handleChatTabOpen,readReceipts:d})};a.prototype.$3=function(){var a=(this.props.maxInitialThreadCount||l)*k-(this.state&&this.state.hasQP?260:0);return Math.min(a,b("getViewportDimensions")().height-j)};a.prototype.$7=function(){if(this.props.isLoaded)return this.props.folder===b("MessagingTag").PENDING?b("React").createElement("div",{className:"_16bh _16bi"},b("React").createElement(b("Link.react"),{onClick:this.$8},h._("See filtered messages"))):null;return this.props.isLoading?b("React").createElement(b("XUISpinner.react"),{className:"jewelLoading"}):b("React").createElement("div",{className:"_v8y"},b("React").createElement(b("Link.react"),{href:"#",onClick:this.$9},h._("Show Older")))};a.prototype.$5=function(){return!this.props.jewelRequestsUI||this.props.folder!==b("MessagingTag").PENDING?null:b("React").createElement("li",{className:"_16bh _16bi"},b("React").createElement(b("MessengerMessageRequestsInfo.react"),null))};a.propTypes={folder:c.string,isLoaded:c.bool,isLoading:c.bool,maxInitialThreadCount:c.number,jewelRequestsUI:c.bool,onFilteredRequestsClick:c.func,onLoadMoreRequest:c.func,onMessageRequestsClick:c.func,onRenderThreads:c.func,threads:c.arrayOf(c.oneOfType([c.instanceOf(b("ImmutableObject")),c.arrayOf(c.instanceOf(b("ImmutableObject")))])).isRequired,viewer:c.string.isRequired};e.exports=a}),null);